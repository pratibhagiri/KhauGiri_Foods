const categories = [
  {
    id: "sandwich",
    name: "Sandwich",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "momo",
    name: "Momos",
   items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "wrap",
    name: "Wraps",
   items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "roll",
    name: "Rolls",
  items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
   
  {
    id: "chaat",
    name: "Chaats",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "paratha",
    name: "Parathas",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "shake",
    name: "Shakes",
    items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  },
  {
    id: "beverage",
    name: "Beverages",
   items: [
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Paneer Sandwich", price: 50, image: "img.jpg"},
      { name: "Cheese Sandwich", price: 55, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"},
      { name: "Veg Sandwich", price: 45, image: "img.jpg"}

    ]
  }
];

const cart = {};

function renderMenu() {
  const container = document.getElementById("menuContainer");
  container.innerHTML = "";

  categories.forEach(cat => {
    const row = document.createElement("div");
    row.className = "mb-4";

    row.innerHTML = `
      <h4>${cat.name}</h4>
      <div class="d-flex overflow-auto" id="${cat.id}-carousel">
        ${cat.items.map((item, i) => `
          <div class="food-card me-3 p-2 border rounded text-center" style="width: 150px;">
            <img src="${item.image}" alt="${item.name}" style="width: 100%; height: 100px; object-fit: cover;" />
            <p><strong>${item.name}</strong><br>â‚¹${item.price}</p>
            <div class="quantity">
              <button onclick="decrease('${cat.id + i}')">-</button>
              <span id="${cat.id + i}">0</span>
              <button onclick="increase('${cat.id + i}')">+</button>
            </div>
          </div>
        `).join("")}
      </div>
    `;

    container.appendChild(row);
  });
}

function increase(id) {
  cart[id] = (cart[id] || 0) + 1;
  document.getElementById(id).textContent = cart[id];
  updateTotal();
}

function decrease(id) {
  if (cart[id]) {
    cart[id]--;
    document.getElementById(id).textContent = cart[id];
    updateTotal();
  }
}

function updateTotal() {
  let total = 0;
  let cartList = "";

  Object.keys(cart).forEach(id => {
    if (cart[id] > 0) {
      categories.forEach(cat => {
        cat.items.forEach((item, i) => {
          const itemId = cat.id + i;
          if (id === itemId) {
            const amount = item.price * cart[id];
            cartList += `<p>${item.name} x ${cart[id]} = â‚¹${amount}</p>`;
            total += amount;
          }
        });
      });
    }
  });

  document.getElementById('cartItems').innerHTML = cartList || "<p>Your cart is empty.</p>";
  document.getElementById('totalAmount').textContent = `Total: â‚¹${total}`;
}

document.getElementById("viewCartBtn").addEventListener("click", () => {
  const modal = new bootstrap.Modal(document.getElementById("cartModal"));
  modal.show();
});

document.getElementById("whatsappBtn").addEventListener("click", function (e) {
  e.preventDefault();
  const whatsappNumber = "919403201043";
  let message = "ðŸ›’ *New Order from Khaugiri Foods*:\n\n";
  let total = 0;
  let hasItems = false;

  Object.keys(cart).forEach(id => {
    if (cart[id] > 0) {
      categories.forEach(cat => {
        cat.items.forEach((item, i) => {
          const itemId = cat.id + i;
          if (id === itemId) {
            const amount = item.price * cart[id];
            message += `â€¢ ${item.name} x ${cart[id]} = â‚¹${amount}\n`;
            total += amount;
            hasItems = true;
          }
        });
      });
    }
  });

  if (!hasItems) {
    alert("Your cart is empty!");
    return;
  }

  message += `\nðŸ’° *Total: â‚¹${total}*\n\nðŸ“¦ Please confirm your order.`;
  const url = `https://wa.me/${whatsappNumber}?text=${encodeURIComponent(message)}`;
  window.open(url, "_blank");
});

window.onload = renderMenu;
